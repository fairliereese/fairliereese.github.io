<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Fairlie Reese

	Journal Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/img/favicon.png">
	<title>Creating a PyPi library – Fairlie Reese</title>
	<meta name="description" content="Creating a pip installable python library">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Creating a PyPi library – Fairlie Reese">
	<meta name="twitter:description" content="Creating a pip installable python library">
	<meta name="twitter:image:src" content="/images/img/pip.png">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Creating a PyPi library – Fairlie Reese" />
	<meta property="og:description" content="Creating a pip installable python library" />
	<meta property="og:image" content="/images/img/pip.png" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Merriweather:300,400|Muli:400,400i,600" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">

	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	

</head>


<body class="loading ajax-loading" data-site-url="" data-page-url="/blog/creating-pip-lib">


	<header class="header">

	<div class="header-image header-image--on" style="background-image: url(/images/img/pip.png);"></div>
	<div class="header-image"></div>

	<div class="header-overlay"></div>

	<div class="header__content">

		
		<a href="/" class="header__title">
			Fairlie Reese
		</a>
		

		<p class="header__tagline">Bioinformatic analysis · Bioinformatics software/pipeline development · Long-read RNA-seq</p>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/" class="menu__list__item__link">Blog / Tutorials</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/projects/" class="menu__list__item__link">Projects</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/publications.html" class="menu__list__item__link">Publications</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
				</ul>
				<ul class="socials">
	
	
	<li class="socials__item">
		
			<a href="https://github.com/fairliereese" target="_blank" class="socials__item__link" title="Github">
				<i class="fab fa-github" aria-hidden="true"></i>
			</a>
		
	</li>
	<!-- console.log(https://github.com/fairliereese) -->
	
	
	
	<li class="socials__item">
		
			<a href="https://orcid.org/0000-0002-9240-0102" target="_blank" class="socials__item__link" title="Orcid">
				<i class="fab fa-orcid" aria-hidden="true"></i>
			</a>
		
	</li>
	<!-- console.log(https://orcid.org/0000-0002-9240-0102) -->
	
	
	
	<li class="socials__item">
		
				<a href="https://scholar.google.com/citations?user=SgA5IcgAAAAJ&hl=en" target="_blank" class="socials__item__link" title="Google Scholar">
					<i class="fas fa-graduation-cap" aria-hidden="true"></i>
				</a>
		
	</li>
	<!-- console.log(https://scholar.google.com/citations?user=SgA5IcgAAAAJ&hl=en) -->
	
	
	
	<li class="socials__item">
		
			<a href="https://bsky.app/profile/fairlie.bsky.social" target="_blank" class="socials__item__link" title="Twitter">
				<i class="fab fa-twitter" aria-hidden="true"></i>
			</a>
		
	</li>
	<!-- console.log(https://bsky.app/profile/fairlie.bsky.social) -->
	
	
	
	<li class="socials__item">
		
			<a href="https://www.linkedin.com/in/fairlie-reese-a930a5b7/" target="_blank" class="socials__item__link" title="Linkedin">
				<i class="fab fa-linkedin" aria-hidden="true"></i>
			</a>
		
	</li>
	<!-- console.log(https://www.linkedin.com/in/fairlie-reese-a930a5b7/) -->
	
	
</ul>

			</div>
		</div>

	</div>

</header>



	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>


	<div class="page">

		<div class="page__content" data-page-title="Creating a PyPi library – Fairlie Reese" data-image="/images/img/pip.png">

			<section class="intro">

	<div class="wrap">

		<h1>Creating a PyPi library</h1>
		<p>07 July 2022</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<p>While writing my first python software library, <a href="https://github.com/mortazavilab/swan_vis/tree/master/swan_vis">Swan</a>, I struggled to figure out how to upload my library to the Python Package Index (PyPi, or <code class="highlighter-rouge">pip</code>), to make it installable from the command line. Hopefully these instructions will help someone else that’s interested in learning how.</p>

<h2 id="uploading-your-library-to-pypi-for-the-first-time">Uploading your library to PyPi for the first time</h2>

<ol>
  <li>Create your library locally with the directory structure <code class="highlighter-rouge">my_library/my_library</code>. Your <code class="highlighter-rouge">.py</code> files should be in <code class="highlighter-rouge">my_library/my_library</code>.</li>
  <li>Make sure your library is importable (ie <code class="highlighter-rouge">import my_library</code>).</li>
  <li>Create a PyPi account <a href="https://pypi.org/account/register/">here</a> if you don’t already have one.</li>
  <li>In the directory above your <code class="highlighter-rouge">.py</code> files, (ie <code class="highlighter-rouge">my_library/</code>), create the following files:
    <ul>
      <li><code class="highlighter-rouge">setup.py</code></li>
      <li><code class="highlighter-rouge">setup.cfg</code></li>
      <li><code class="highlighter-rouge">LICENSE.txt</code></li>
      <li>(optional) <code class="highlighter-rouge">README.txt</code></li>
    </ul>
  </li>
  <li>Edit <code class="highlighter-rouge">setup.py</code>.
    <ul>
      <li>See <a href="https://drive.google.com/file/d/17uLy3h0F4cl2AlLXVWC8sTClei19DeLI/view?usp=sharing">here</a> for an example and instructions on what to put in this file</li>
      <li>See <a href="https://pypi.org/classifiers/">here</a> for a list of valid classifiers you can use in this file</li>
      <li><strong>Note</strong>: You can automatically generate a list of python libraries that are required for yours to run (necessary for the  <code class="highlighter-rouge">install_requires</code> section of <code class="highlighter-rouge">setup.py</code>) using <a href="https://github.com/bndr/pipreqs"><code class="highlighter-rouge">pipreqs</code></a>. This will automatically write all imported packages in your library to a <code class="highlighter-rouge">requirements.txt</code> file. These requirements are strict and you may want to relax these requirements if you believe your library will work with other versions of these requirements.
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>pipreqs
pipreqs ~/mortazavi_lab/bin/swan_vis/swan_vis/
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Edit <code class="highlighter-rouge">setup.cfg</code>. You can likely just use <a href="https://drive.google.com/file/d/1SdZNtID50sK_ptijfB8xog-2wu1GQIg7/view?usp=sharing">this file</a>.</li>
  <li>Edit <code class="highlighter-rouge">LICENSE.txt</code>. If you want to use the MIT license, use <a href="https://drive.google.com/file/d/1H-pXVF5Di1Kl0nV8-jgkGKyOsIJrHqSG/view?usp=sharing">this file</a>.</li>
  <li>Install <code class="highlighter-rouge">setuptools</code>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>setuptools
</code></pre></div>    </div>
  </li>
  <li>In the directory <code class="highlighter-rouge">my_library/</code>, run:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python setup.py sdist
</code></pre></div>    </div>
  </li>
  <li>Install <code class="highlighter-rouge">twine</code>, which will upload your library to PyPi
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>twine
</code></pre></div>    </div>
  </li>
  <li>Make another account for <a href="https://test.pypi.org/account/register/">TestPyPi</a> if you don’t have one already (TestPyPi and PyPi are separate from one another).</li>
  <li>Upload your library to TestPyPi first by running the following command in the <code class="highlighter-rouge">my_library/</code> directory:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>twine upload <span class="nt">--repository-url</span> https://test.pypi.org/legacy/ dist/<span class="k">*</span>
</code></pre></div>    </div>
  </li>
  <li>From any directory on your computer, test your upload by installing from TestPyPi:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install</span> <span class="nt">-i</span> https://test.pypi.org/pypi/ <span class="nt">--extra-index-url</span> https://pypi.org/simple my_library
</code></pre></div>    </div>
  </li>
  <li>Try to import your newly-installed library in python. Start python and run:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">my_library</span>
</code></pre></div>    </div>
    <p>You can and should also try some simple tests using the functionality of your library to ensure that it works.</p>
  </li>
  <li>After verifying that it worked, you are ready to upload your library to real PyPi. Run the following line of code in the <code class="highlighter-rouge">my_library/</code> directory:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>twine upload dist/<span class="k">*</span>
</code></pre></div>    </div>
  </li>
  <li>Now, you should be able to pip install your library from anywhere, and any computer (with internet access) using:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>my_library
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="updating-your-library-on-pypi">Updating your library on PyPi</h2>
<ol>
  <li>Create a new release of your library on GitHub</li>
  <li>Replace the <code class="highlighter-rouge">download_url</code> in <code class="highlighter-rouge">setup.py</code> with the link to the <code class="highlighter-rouge">tar.gz</code> file containing your release on GitHub.</li>
  <li>Replace <code class="highlighter-rouge">version</code> in <code class="highlighter-rouge">setup.py</code> with the new version number that you assigned to your release on GitHub.</li>
  <li>Remove the old package versions from your previous PyPi upload including the following folders:
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dist/
my_library.egg_info/
</code></pre></div>    </div>
    <p>If you don’t remove these, <code class="highlighter-rouge">twine</code> will try to reupload an old distribution, and PyPi cannot accommodate two libraries with the same name / version ID.</p>
  </li>
  <li>Run the following code in <code class="highlighter-rouge">my_library/</code>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python setup.py sdist
</code></pre></div>    </div>
  </li>
  <li>Upload your library to TestPyPi and test it by running steps 12-14 from above.</li>
  <li>Upload your library to normal PyPi by running step 15 above</li>
</ol>

<p>References / additional resources:</p>
<ul>
  <li><a href="https://medium.com/@joel.barmettler/how-to-upload-your-python-package-to-pypi-65edc5fe9c56">Uploading your python package to PyPi</a></li>
  <li><a href="https://packaging.python.org/en/latest/guides/using-testpypi/">Test PyPi</a></li>
  <li><a href="https://docs.conda.io/projects/conda-build/en/latest/user-guide/tutorials/build-pkgs-skeleton.html">Building conda packages from PyPi</a></li>
  <li><a href="https://pypi.org/help/#file-name-reuse">PyPi cannot accommodate libraries with the same name / version number</a></li>
  <li><a href="https://docs.python.org/3.7/distutils/setupscript.html">Writing the <code class="highlighter-rouge">setup.py</code> script</a></li>
  <li><a href="https://stackoverflow.com/questions/31684375/automatically-create-requirements-txt">Automatically creating <code class="highlighter-rouge">requirements.txt</code></a></li>
  <li><a href="https://stackoverflow.com/questions/34514703/pip-install-from-pypi-works-but-from-testpypi-fails-cannot-find-requirements">Installing my library from TestPyPi but the rest of the requirements from normal PyPi</a></li>
  <li><a href="https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository">Creating GitHub releases</a></li>
  <li>The mistakes I made along the way</li>
</ul>


	</div>

</section>

		</div>

	</div>


	<footer class="footer">

	<div class="footer__copyright">
		<span>© 2025 Fairlie Reese</span>
		<a href="https://jekyllthemes.io" target="_blank">Jekyll Themes</a>
	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/plugins-min.js"></script>
	<script src="/js/journal-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>
